"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var r=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),r}var r={exports:{}};!function(t,e){var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function o(t){try{delete window[t]}catch(e){window[t]=void 0}}function a(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}function i(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t,s=e.timeout||r.timeout,c=e.jsonpCallback||r.jsonpCallback,u=void 0;return new Promise((function(r,l){var p=e.jsonpCallbackFunction||n(),f=c+"_"+p;window[p]=function(t){r({ok:!0,json:function(){return Promise.resolve(t)}}),u&&clearTimeout(u),a(f),o(p)},i+=-1===i.indexOf("?")?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+i+c+"="+p),e.charset&&d.setAttribute("charset",e.charset),e.nonce&&d.setAttribute("nonce",e.nonce),e.referrerPolicy&&d.setAttribute("referrerPolicy",e.referrerPolicy),e.crossorigin&&d.setAttribute("crossorigin","true"),d.id=f,document.getElementsByTagName("head")[0].appendChild(d),u=setTimeout((function(){l(new Error("JSONP request to "+t+" timed out")),o(p),a(f),window[p]=function(){o(p)}}),s),d.onerror=function(){l(new Error("JSONP request to "+t+" failed")),o(p),a(f),u&&clearTimeout(u)}}))}e.exports=i}(0,r);const n=t(r.exports),o=async(t,e,r)=>{const o=await fetch(`https://api-meting.imsyy.top/api?server=${t}&type=${e}&id=${r}`),a=await o.json();if(a[0].url.startsWith("@")){const[t,e,r,o]=a[0].url.split("@").slice(1),i=await n(o).then((t=>t.json())),s=(i.req_0.data.sip.find((t=>!t.startsWith("http://ws")))||i.req_0.data.sip[0]).replace("http://","https://");return a.map(((t,e)=>({title:t.name||t.title,artist:t.artist||t.author,src:s+i.req_0.data.midurlinfo[e].purl,pic:t.pic,lrc:t.lrc})))}return a.map((t=>({title:t.name||t.title,artist:t.artist||t.author,src:t.url,pic:t.pic,lrc:t.lrc})))},a=async()=>{const t=await fetch("https://v1.hitokoto.cn");return await t.json()},i=async t=>{const e=await fetch(`https://restapi.amap.com/v3/ip?key=${t}`);return await e.json()},s=async(t,e)=>{const r=await fetch(`https://restapi.amap.com/v3/weather/weatherInfo?key=${t}&city=${e}`);return await r.json()},c=async t=>{const e=await fetch(`https://api.gumengya.com/Api/BaiduSearchWord?format=json&query=${t}`);return await e.json()};export{t as a,o as b,a as c,i as d,s as e,c as f,e as g};
